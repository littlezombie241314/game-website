<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>社区 - Orion Games</title>
    <meta name="description" content="加入 Orion Games 社区，关注社媒与玩家创作。">
    <link rel="stylesheet" href="./assets/css/styles.css">
  </head>
  <body>
    <header class="header">
      <div class="container nav">
        <a class="brand" href="index.html" aria-label="返回首页">
          <span class="brand-badge" aria-hidden="true"></span>
          <span data-i18n="brand">Orion Games</span>
        </a>
        <nav class="nav-links" aria-label="主导航">
          <a class="nav-link" href="index.html" data-i18n="nav.home">首页</a>
          <a class="nav-link" href="games.html" data-i18n="nav.games">游戏</a>
          <a class="nav-link" href="news.html" data-i18n="nav.news">新闻</a>
          <a class="nav-link" href="matches.html" data-i18n="nav.matches">比赛</a>
          <a class="nav-link" href="community.html" data-i18n="nav.community">社区</a>
          <a class="nav-link" href="support.html" data-i18n="nav.support">支持</a>
          <a class="nav-link" href="careers.html" data-i18n="nav.careers">招聘</a>
          <a class="nav-link" href="about.html" data-i18n="nav.about">关于</a>
          <a class="nav-link" href="contact.html" data-i18n="nav.contact">联系</a>
        </nav>
        <div class="nav-actions">
          <select id="lang-select" class="select" aria-label="Language">
            <option value="zh">中文</option>
            <option value="en">English</option>
          </select>
          <button id="theme-toggle" class="btn icon-btn" data-i18n="nav.theme" aria-label="切换主题">🌓</button>
          <a class="btn btn-primary" href="games.html" data-i18n="nav.playNow">立即游玩</a>
        </div>
      </div>
    </header>

    <main class="container" style="padding:24px 0">
      <div class="section-head">
        <h1 class="section-title" data-i18n="community.title">社区</h1>
        <div class="badge-row">
          <a class="pill" href="#" aria-label="前往论坛">论坛</a>
          <a class="pill" href="#" aria-label="加入 Discord">Discord</a>
          <a class="pill" href="#" aria-label="关注 Weibo">Weibo</a>
          <a class="pill" href="#" aria-label="关注 Bilibili">Bilibili</a>
          <a class="pill" href="#" aria-label="关注 YouTube">YouTube</a>
          <a class="pill" href="#" aria-label="关注 X">X</a>
        </div>
      </div>

      <section class="section">
        <div class="grid grid-3">
          <article class="card">
            <div class="card-media" aria-hidden="true"></div>
            <div class="card-body">
              <h3 class="card-title">官方论坛</h3>
              <p class="muted">游戏讨论、攻略与建议反馈。</p>
              <div style="margin-top:8px"><a class="btn" href="#">前往</a></div>
            </div>
          </article>
          <article class="card">
            <div class="card-media" aria-hidden="true"></div>
            <div class="card-body">
              <h3 class="card-title">Discord</h3>
              <p class="muted">与开发者与玩家实时交流。</p>
              <div style="margin-top:8px"><a class="btn" href="#">加入</a></div>
            </div>
          </article>
          <article class="card">
            <div class="card-media" aria-hidden="true"></div>
            <div class="card-body">
              <h3 class="card-title">创作者计划</h3>
              <p class="muted">投稿内容与合作激励。</p>
              <div style="margin-top:8px"><a class="btn" href="#">了解更多</a></div>
            </div>
          </article>
        </div>
      </section>

      <section class="section">
        <div class="section-head" style="margin-top:6px">
          <h2 class="section-title" data-i18n="community.ugc">UGC 创作</h2>
          <a class="btn" href="#ugc-submit" data-i18n="community.submit">提交作品</a>
        </div>
        <div class="toolbar" style="margin-bottom:12px">
          <input id="ugc-search" class="input" data-i18n="community.search" data-i18n-attr="placeholder" placeholder="搜索作品标题或作者...">
          <select id="ugc-type" class="select" aria-label="按类型筛选">
            <option value="all" data-i18n="community.typeAll">全部类型</option>
            <option value="map">地图</option>
            <option value="mod">MOD</option>
            <option value="skin">皮肤</option>
            <option value="screenshot">截图</option>
          </select>
          <select id="ugc-sort" class="select" aria-label="排序">
            <option value="hot" data-i18n="community.sortHot">最热优先</option>
            <option value="new" data-i18n="community.sortNew">最新优先</option>
          </select>
        </div>
        <div id="ugc-grid" class="grid grid-4"><!-- 动态渲染 --></div>
      </section>

      <section id="ugc-submit" class="section">
        <h2 class="section-title" style="margin:12px 0 8px">提交你的作品</h2>
        <form data-demo class="card" style="padding:16px; grid-template-rows:auto">
          <div class="grid grid-2">
            <div>
              <label class="muted">作者</label>
              <input class="input" required placeholder="你的昵称">
            </div>
            <div>
              <label class="muted">类型</label>
              <select class="select" required>
                <option>地图</option>
                <option>MOD</option>
                <option>皮肤</option>
                <option>截图</option>
              </select>
            </div>
          </div>
          <div style="margin-top:10px">
            <label class="muted">作品标题</label>
            <input class="input" required placeholder="如：星陨要塞 v1.2">
          </div>
          <div style="margin-top:10px">
            <label class="muted">作品链接</label>
            <input class="input" required placeholder="下载/展示链接">
          </div>
          <div style="margin-top:10px">
            <label class="muted">简介</label>
            <textarea class="textarea" placeholder="一句话介绍你的作品..."></textarea>
          </div>
          <div style="margin-top:12px">
            <button class="btn btn-primary" type="submit">提交</button>
          </div>
        </form>
      </section>
    </main>

    <footer class="footer">
      <div class="container footer-inner">
        <div>
          <div class="brand" style="margin-bottom:8px">
            <span class="brand-badge" aria-hidden="true"></span>
            <span>Orion Games</span>
          </div>
          <p class="muted">打造沉浸与乐趣并存的互动娱乐体验。</p>
        </div>
        <div>
          <h4>产品</h4>
          <div><a href="games.html">全部游戏</a></div>
          <div><a href="news.html">更新公告</a></div>
          <div><a href="esports.html">电竞赛事</a></div>
        </div>
        <div>
          <h4>公司</h4>
          <div><a href="about.html">关于我们</a></div>
          <div><a href="careers.html">加入我们</a></div>
          <div><a href="contact.html">商务合作</a></div>
        </div>
        <div>
          <h4>支持</h4>
          <div><a href="support.html">帮助中心</a></div>
          <div><a href="community.html">社区与反馈</a></div>
          <div><a href="support.html#faq">常见问题</a></div>
        </div>
      </div>
      <div class="container copyright">
        © <span id="year"></span> Orion Games. All rights reserved.
      </div>
    </footer>

    <script src="./assets/js/i18n.js"></script>
    <script src="./assets/js/main.js"></script>
    <script>
      (async function renderUGC(){
        const res = await fetch('./data/ugc.json', { cache: 'no-store' });
        const data = await res.json();
        const items = data.items || [];
        const wrap = document.getElementById('ugc-grid');
        const qEl = document.getElementById('ugc-search');
        const typeEl = document.getElementById('ugc-type');
        const sortEl = document.getElementById('ugc-sort');

        function apply() {
          const q = (qEl?.value || '').toLowerCase();
          const t = typeEl?.value || 'all';
          const s = sortEl?.value || 'hot';
          let list = items.filter(x => {
            const okQ = !q || x.title.toLowerCase().includes(q) || (x.author || '').toLowerCase().includes(q);
            const okT = t === 'all' || x.type === t;
            return okQ && okT;
          });
          list = list.sort((a,b) => {
            if (s === 'new') return (b.date || '').localeCompare(a.date || '');
            return (b.likes || 0) - (a.likes || 0);
          });
          wrap.innerHTML = list.map(x => `
            <article class="card">
              <div class="card-media" aria-hidden="true"></div>
              <div class="card-body">
                <div class="badge-row" style="margin-bottom:6px">
                  <span class="pill">${x.type}</span>
                  <span class="pill">❤ ${x.likes ?? 0}</span>
                </div>
                <h3 class="card-title">${x.title}</h3>
                <p class="muted">by ${x.author ?? '佚名'}</p>
                <div style="margin-top:8px">
                  <a class="btn" href="${x.link}" target="_blank" rel="noopener" data-i18n="community.view">查看</a>
                </div>
              </div>
            </article>
          `).join('');
          if (typeof i18nApply === 'function') {
            i18nApply(I18N_CURRENT);
          }
        }

        qEl?.addEventListener('input', apply);
        typeEl?.addEventListener('change', apply);
        sortEl?.addEventListener('change', apply);
        apply();
      })();
    </script>
  </body>
</html>


